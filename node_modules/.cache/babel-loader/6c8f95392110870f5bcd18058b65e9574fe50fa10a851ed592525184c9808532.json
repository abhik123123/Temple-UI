{"ast":null,"code":"import React,{createContext,useState,useCallback}from'react';import config from'../config/environment';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(false);const login=useCallback(async(username,password)=>{if(!config.requireAuth){// Local environment - skip auth\nsetUser({username,name:(username===null||username===void 0?void 0:username.split('@')[0])||'admin'});setIsAuthenticated(true);return{success:true,message:'Local mode - No authentication required'};}setLoading(true);try{const response=await fetch(\"\".concat(config.apiUrl,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,email:username,password})});if(response.ok){const data=await response.json();localStorage.setItem('token',data.token);setUser(data.user);setIsAuthenticated(true);return{success:true,message:'Login successful'};}else{return{success:false,message:'Invalid credentials'};}}catch(error){return{success:false,message:error.message};}finally{setLoading(false);}},[]);const logout=useCallback(()=>{localStorage.removeItem('token');setUser(null);setIsAuthenticated(false);},[]);const value={user,isAuthenticated,loading,login,logout,requireAuth:config.requireAuth,environment:config.env};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});}export function useAuth(){const context=React.useContext(AuthContext);if(!context){throw new Error('useAuth must be used within AuthProvider');}return context;}","map":{"version":3,"names":["React","createContext","useState","useCallback","config","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","isAuthenticated","setIsAuthenticated","loading","setLoading","login","username","password","requireAuth","name","split","success","message","response","fetch","concat","apiUrl","method","headers","body","JSON","stringify","email","ok","data","json","localStorage","setItem","token","error","logout","removeItem","value","environment","env","Provider","useAuth","context","useContext","Error"],"sources":["C:/Users/Abhishek Kandukuri/Downloads/temple_react_full/src/context/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useState, useCallback } from 'react';\r\nimport config from '../config/environment';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const login = useCallback(async (username, password) => {\r\n    if (!config.requireAuth) {\r\n      // Local environment - skip auth\r\n      setUser({ username, name: username?.split('@')[0] || 'admin' });\r\n      setIsAuthenticated(true);\r\n      return { success: true, message: 'Local mode - No authentication required' };\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${config.apiUrl}/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, email: username, password })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        localStorage.setItem('token', data.token);\r\n        setUser(data.user);\r\n        setIsAuthenticated(true);\r\n        return { success: true, message: 'Login successful' };\r\n      } else {\r\n        return { success: false, message: 'Invalid credentials' };\r\n      }\r\n    } catch (error) {\r\n      return { success: false, message: error.message };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    localStorage.removeItem('token');\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n  }, []);\r\n\r\n  const value = {\r\n    user,\r\n    isAuthenticated,\r\n    loading,\r\n    login,\r\n    logout,\r\n    requireAuth: config.requireAuth,\r\n    environment: config.env\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = React.useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}