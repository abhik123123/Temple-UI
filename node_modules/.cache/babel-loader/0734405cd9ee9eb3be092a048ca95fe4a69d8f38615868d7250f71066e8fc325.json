{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children,requireAdmin=false}=_ref;const{isAuthenticated,user,requireAuth}=useAuth();// If this is an admin route (requireAdmin = true), enforce authentication and admin role\nif(requireAdmin){// Admin routes always require authentication\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check if user has admin role\nif((user===null||user===void 0?void 0:user.role)!=='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}// User is authenticated and is admin\nreturn children;}// For non-admin routes:\n// If authentication is not required (local environment), allow access\nif(!requireAuth){return children;}// If authentication is required and user is authenticated, allow access\nif(isAuthenticated){return children;}// Otherwise, redirect to login\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}","map":{"version":3,"names":["React","Navigate","useAuth","jsx","_jsx","ProtectedRoute","_ref","children","requireAdmin","isAuthenticated","user","requireAuth","to","replace","role"],"sources":["C:/Users/Abhishek Kandukuri/Downloads/temple_react_full/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function ProtectedRoute({ children, requireAdmin = false }) {\r\n  const { isAuthenticated, user, requireAuth } = useAuth();\r\n\r\n  // If this is an admin route (requireAdmin = true), enforce authentication and admin role\r\n  if (requireAdmin) {\r\n    // Admin routes always require authentication\r\n    if (!isAuthenticated) {\r\n      return <Navigate to=\"/login\" replace />;\r\n    }\r\n    // Check if user has admin role\r\n    if (user?.role !== 'admin') {\r\n      return <Navigate to=\"/\" replace />;\r\n    }\r\n    // User is authenticated and is admin\r\n    return children;\r\n  }\r\n\r\n  // For non-admin routes:\r\n  // If authentication is not required (local environment), allow access\r\n  if (!requireAuth) {\r\n    return children;\r\n  }\r\n\r\n  // If authentication is required and user is authenticated, allow access\r\n  if (isAuthenticated) {\r\n    return children;\r\n  }\r\n\r\n  // Otherwise, redirect to login\r\n  return <Navigate to=\"/login\" replace />;\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEjD,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAqC,IAApC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,KAAM,CAAC,CAAAF,IAAA,CACvE,KAAM,CAAEG,eAAe,CAAEC,IAAI,CAAEC,WAAY,CAAC,CAAGT,OAAO,CAAC,CAAC,CAExD;AACA,GAAIM,YAAY,CAAE,CAChB;AACA,GAAI,CAACC,eAAe,CAAE,CACpB,mBAAOL,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CACA;AACA,GAAI,CAAAH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,IAAI,IAAK,OAAO,CAAE,CAC1B,mBAAOV,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CACA;AACA,MAAO,CAAAN,QAAQ,CACjB,CAEA;AACA;AACA,GAAI,CAACI,WAAW,CAAE,CAChB,MAAO,CAAAJ,QAAQ,CACjB,CAEA;AACA,GAAIE,eAAe,CAAE,CACnB,MAAO,CAAAF,QAAQ,CACjB,CAEA;AACA,mBAAOH,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}